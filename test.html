<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form>
        <label id="title_div">
            Title:<input id="title" type="text">
            <p id="title_par"></p>
        </label>

        <label id="author_div">
            Author:<input id="author" type="text">
            <p id="author_par"></p>
        </label>

        <label id="email_div">
            Email:<input id="email_author" type="text">
            <p id="email_par"></p>
        </label>

        <label id="price_div">
            Price:<input id="price" type="text">
            <p id="price_par"></p>
        </label>

        <label id="pub_div">
            Publication Date:<input id="pub" type="date">
            <p id="pub_par"></p>
        </label>

        <label id="lang_div">
            Language:
            <select value="type" id="lang">
                <option disabled selected hidden value>-- Select a language --</option>
                <option value="Arabic">Arabic</option>
                <option value="English">English</option>
                <option value="French">French</option>
            </select>
            <p id="lang_par"></p>
        </label>

        <div id="type_div" style="position: relative;">
            <span
                style="text-align: center;font-size: 20px;font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">Type:
            </span>
            <fieldset>
                <label><input class="type" type="radio" value="roman" name="type">Roman</label>
                <label><input class="type" type="radio" value="essay" name="type">Essay</label>
                <label><input class="type" type="radio" value="comic" name="type">comic book</label>
            </fieldset>
            <p id="type_par"></p>
        </div>

        <input type="submit" value="Submit" id="submit_btn">
    </form>
    <p id="message"></p>
    <div id="print_div">
        <table class="table table-dark table-striped" style="color: white;width: 50% !important;">
            <thead>
                <td>Title</td>
                <td>Author</td>
                <td>Email</td>
                <td>Price</td>
                <td>Pub Date</td>
                <td>Language</td>
                <td>Type</td>
                <td>Controls</td>
            </thead>
            <tbody id="table">
    
            </tbody>
        </table>
        <input type="button" value="print" onclick="print_btn()">
    </div>
    <script>
        
        var form = document.getElementsByTagName("form")[0];
        var title = document.getElementById("title");
        var author = document.getElementById("author");
        var email = document.getElementById("email_author");
        var price = document.getElementById("price");
        var pub = document.getElementById("pub");
        var lang = document.getElementById("lang");
        var type = document.getElementsByClassName("type"); // tableau
        var table = document.getElementById("table");
        var message = document.getElementById("message");
        var print_div = document.getElementById("print_div");
        var listOuvrages = [];
        class Ouvrage {
                constructor (leTitre,lAuteur,lEmail,lePrix,laDate,laLangue,leType) {
                    this.price = lePrix;
                    this.title = leTitre;
                    this.author = lAuteur;
                    this.email = lEmail;
                    this.type = leType;
                    this.date = laDate;
                    this.language = laLangue;
                }
                detailsOuvrage(){
                    return `L'ouvrage ${this.title} est un ${this.type} en langue ${this.language}  `; 
                }
        }
       

    
        form.addEventListener("submit",function(e){
            e.preventDefault();

            // méthode 1 pour récupérer le radio bouton coché
            // var checked = document.querySelector(".type:checked");
            // var checked = document.querySelector("input[type='radio']:checked");
            // var checked = document.querySelector("input[name='type']:checked");
            // var checked = document.querySelector("input[class='type']:checked");

            // méthode 2 pour récupérer le radio bouton coché
            var checkedRadioValue = "";
            for(var i=0; i<type.length; i++) {
                if(type[i].checked)
                    checkedRadioValue = type[i].value;
            }

            var ouvrage = new Ouvrage(title.value,author.value,email.value,price.value,pub.value,lang.value,checkedRadioValue);
            // console.log(ouvrage.title);
            // ouvrage.title = "abc";            
            // console.log(ouvrage);
            
            // Ajouter l'objet "ouvrage" à la liste "listeOuvrages"
            listOuvrages.push(ouvrage);

            // Afficher tous les éléments de la liste "listeOuvrages"
            for(var i=0 ; i<listOuvrages.length ;i++ ){
                console.log(listOuvrages[i]);
            }
            

        });




    </script>
</body>
</html>